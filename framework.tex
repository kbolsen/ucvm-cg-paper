
\input{table-manuals}

\section{The UCVM Software Framework}\label{sec:ucvm}

\textcolor{red}{We need to consider if this section should include a figure with a schematic representation of UCVM, its core commands, utilities and so on. I think it is worth including such a figure at this point because otherwise the paper could be seen as a little to dry.}

The primary functionality provided by UCVM is the ability to query a wide array of CVMs for material properties in standardized formats, independently of the particularities of each dataset or CVM. UCVM achieves this by registering datasets and velocity models into the framework. Registration of a velocity model or dataset consists of creating the appropriate programming application interface (API) to facilitate the communication between the framework utilities and tools, and the velocity models and datasets. Once a velocity model or dataset has been registered with UCVM, a client can use the framework utilities to retrieve information from the models at any geographic point within the coverage region of the model. A client can be either a user or another software. The primary data-point typically retrieved by a client consists of a float triplet with the seismic velocities (\vp{} and \vs{}), and the material's density ($\rho$). At times we refer to this triple as the payload. The UCVM can then be used to produce standardized output in the form of three-dimensional (3D) volumetric datasets, two-dimensional (2D) vertical cross-sections and horizontal slices, and individual data-points. A client can also use other UCVM utilities for plotting and transforming models and datasets.

In order to facilitate access to the models, UCVM conceals each model's local coordinate system behind a generic querying interface. Data points are queried through this interface by geographic latitude and longitude, and a vertical $z$-coordinate. The framework allows defining the $z$-axis as either depth below the free surface (in meters, positive downward) or elevation relative to mean sea level (where zero is at sea level, positive upward and negative downward). The framework further extends the standardized interface by allowing multiple velocity models to be aggregated into a single composite model. Composition is accomplished by tiling two or more velocity models in three dimensions according to a user-specified priority ordering. To support this flexible query mechanism consistently across all models, UCVM includes a high-resolution digital elevation model (DEM). The DEM is synthesized from the USGS National Elevation Dataset (\textcolor{red}{citation needed}) and the ETOPO1 Global Relief Model (\textcolor{red}{citation needed}). An additional advantage to providing the built-in DEM is that the client can retrieve the surface elevation at any query point in addition to the default data-point payload (\vp{}, \vs{}), $\rho$).

With the exception of the Wasatch Front (Utah) CVM, currently the primary focus of UCVM has been on models available for the State of California (and portions of neighboring States). However, the framework has been designed to be easily modified to cover any arbitrary region of the Earth's surface, provided adequate resolution velocity and elevation models exist. Additional details about the models available through UCVM are given in the following section on Community Velocity Models. Subsequent sections provide further information on the main UCVM utilities and APIs. However, due to space limitations, not all UCVM utilities and options can described here. General and advanced users should refer to on-line manuals and documentation. Table \ref{tab:manuals} provide URL addresses linking to supporting material. The last section of the paper is dedicated to additional aspects on the computational performance of the UCVM framework and two recent case applications. 






% ----------------------------------------------------------------------------------------
% THE MATERIAL BELOW IS TO BE MOVED TO A LATER SECTION ON THE TILING UTILITY
% ----------------------------------------------------------------------------------------

%\begin{figure}
%\centering
%\epsfig{file=UCVM_Tiling_Concept.pdf,scale=0.35}
%\caption{Tiling of velocity models (TODO: Redo/cleanup this figure).}\label{fig:tiling}
%\end{figure}

%The framework further extends the standardized interface by allowing multiple velocity models to be aggregated into a single composite model. Composition is accomplished by tiling two or more velocity models in three dimensions according to a user-specified priority ordering. 

%Under this scheme, a query point is submitted sequentially to each velocity model within the ordered list that comprises the composite. The first model to return valid velocity data for the point is considered to have fulfilled the data request and subsequent models are not queried. Thus, overlap among the individual models is acceptable and their relative priority ordering arbitrates which one satisfies any given query. Generally, no smoothing is performed at the interfaces between models (an exception is interpolation between a geotechnical layer and a crustal model as discussed later in this paper). This tiling concept is illustrated in Figure \ref{fig:tiling}.

